<!-- app/views/users/edit.html.erb -->
<div class="profile-container" data-controller="photo">
  <div class="profile-pic-container">
    <% if @user.photo.attached? %>
      <%= image_tag @user.photo, class: "avatar-xxl" %>
    <% else %>
      <%= image_tag "placeholder.png", class: "avatar-xxl" %>
    <% end %>
    <button type="button" class="edit-photo-button" data-action="click->photo#editPhoto">
      <i class="fa-solid fa-camera"></i> Edit
    </button>
  </div>
  <div class="profile-form-container">
    <h2>Your Profile</h2>
    <%= simple_form_for(@user, url: update_user_profile_path, html: { multipart: true }) do |f| %>
      <div class="form-group">
        <%= f.input :name, label: "Full Name" %>
      </div>
      <div class="form-group">
        <%= f.input :email, label: "Email" %>
      </div>
      <!-- Hidden file input always present -->
      <div class="form-group hidden-file-input">
        <%= f.input :photo, as: :file, label: "Upload Profile Picture", input_html: { data: { "photo-target": "fileInput" } } %>
      </div>
      <div class="form-group">
        <%= f.button :submit, "Update Profile" %>
      </div>
    <% end %>
  </div>
</div>
